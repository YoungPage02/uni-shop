"use strict";var o=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,e,s)=>e in t?o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,a=(o,t)=>{for(var e in t||(t={}))i.call(t,e)&&r(o,e,t[e]);if(s)for(var e of s(t))n.call(t,e)&&r(o,e,t[e]);return o},d=require("../../common/vendor.js");const c={watch:{total:{handler(o){const t=this.options.find((o=>"购物车"===o.text));t&&(t.info=o)},immediate:!0}},computed:a(a({},d.mapState("m_cart",["cart"])),d.mapGetters(["total"])),data:()=>({goods_info:{},options:[{icon:"shop",text:"店铺",infoBackgroundColor:"#007aff",infoColor:"red"},{icon:"cart",text:"购物车",info:0}],buttonGroup:[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}]}),methods:(g=a({},d.mapMutations(["addToCart"])),p={getGoodsDeatails:async function(o){const{data:t}=await d.index.$http.get("/api/public/v1/goods/detail",{goods_id:o});if(200!==t.meta.status)return d.index.$showMsg();t.message.goods_introduce=t.message.goods_introduce.replace(/<img /g,'<img style="display:block;"').replace(/webp/g,"jpg"),this.goods_info=t.message},buttonClick(o){if("加入购物车"===o.content.text){const o={goods_id:this.goods_info.goods_id,goods_name:this.goods_info.goods_name,goods_price:this.goods_info.goods_price,goods_count:1,goods_small_logo:this.goods_info.goods_small_logo,goods_state:!0};this.addToCart(o)}},preview(o){d.index.previewImage({current:o,urls:this.goods_info.pics.map((o=>o.pics_big))})},onClick(o){"购物车"===o.content.text&&d.index.switchTab({url:"/pages/cart/cart"})}},t(g,e(p))),onLoad(o){const t=o.goods_id;this.getGoodsDeatails(t)}};var g,p;if(!Array){(d.resolveComponent("uni-icons")+d.resolveComponent("uni-goods-nav"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-goods-nav/components/uni-goods-nav/uni-goods-nav.js"))();var l=d._export_sfc(c,[["render",function(o,t,e,s,i,n){return d.e({a:i.goods_info.goods_price},i.goods_info.goods_price?{b:d.f(i.goods_info.pics,((o,t,e)=>({a:o.pics_big,b:d.o((o=>n.preview(t))),c:t}))),c:d.t(i.goods_info.goods_price),d:d.t(i.goods_info.goods_name),e:d.p({type:"star",size:"18",color:"gray"}),f:d.t(o.$store.state.cart.length),g:i.goods_info.goods_introduce,h:d.o(n.onClick),i:d.o(n.buttonClick),j:d.p({fill:!0,options:i.options,"button-group":i.buttonGroup})}:{})}]]);wx.createPage(l);
