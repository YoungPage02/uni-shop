"use strict";var o=require("../../common/vendor.js");const s={data:()=>({queryObj:{pagenum:1,pagesize:10},goodsList:[],total:0,isloading:!1,defaultPic:"https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png"}),methods:{async getGoodsList(s){this.isloading=!0;const{data:t}=await o.index.$http.get("/api/public/v1/goods/search",this.queryObj);if(this.isloading=!1,s&&s(),console.log(t,"商品列表数据"),200!==t.meta.status)return o.index.$showMsg();this.goodsList=[...this.goodsList,...t.message.goods],console.log(this.goodsList),this.total=t.message.total},gotoDetail(s){o.index.navigateTo({url:"/subpkg/goods_detail/goods_detail?goods_id="+s.goods_id})}},onLoad(o){o.query?this.queryObj.query=o.query:o.cid&&(this.queryObj.cid=o.cid),this.getGoodsList()},onReachBottom(){if(!this.isloading){if(this.queryObj.pagenum*this.queryObj.pagesize>=this.total)return o.index.$showMsg("数据加载完毕！");this.queryObj.pagenum+=1,this.getGoodsList()}},onPullDownRefresh(){this.queryObj.pagenum=1,this.goodsList=[],this.total=0,this.isloading=!1,this.getGoodsList((()=>{o.index.stopPullDownRefresh()}))}};if(!Array){o.resolveComponent("my-goods")()}Math;var t=o._export_sfc(s,[["render",function(s,t,e,i,a,d){return{a:o.f(a.goodsList,((s,t,e)=>({a:"f866590a-0-"+e,b:o.p({goods:s}),c:t,d:o.o((o=>d.gotoDetail(s)))})))}}]]);wx.createPage(t);
