"use strict";var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,i=(e,i)=>{for(var n in i||(i={}))r.call(i,n)&&a(e,n,i[n]);if(t)for(var n of t(i))o.call(i,n)&&a(e,n,i[n]);return e},n=require("../../common/vendor.js");const s={name:"my-login",computed:i({},n.mapState(["redirect"])),data:()=>({}),methods:i({getUserProfile(){n.index.getUserProfile({desc:"一键登录",fail:()=>{n.index.$showMsg("您取消了登录授权")},success:e=>{console.log(e),this.updataUserInfo(e),this.getToken(e)}})},getToken(e){n.index.login({provider:"weixin",fail:()=>{n.index.$showMsg("登录失败")},success:async t=>{t.code,e.encryptedData,e.iv,e.rawData,e.signature,this.updataToken(),this.navigateBack()}})},navigateBack(){null!==this.redirect&&"switchTab"==this.redirect.openType&&n.index.switchTab({url:this.redirect.from,complete:()=>{this.updataRedirect(null)}})}},n.mapMutations(["updataUserInfo","updataToken","updataRedirect"]))};if(!Array){n.resolveComponent("uni-icons")()}Math;var c=n._export_sfc(s,[["render",function(e,t,r,o,a,i){return{a:n.p({type:"contact-filled",size:"100",color:"#AfAfAf"}),b:n.o(((...e)=>i.getUserProfile&&i.getUserProfile(...e)))}}]]);wx.createComponent(c);
