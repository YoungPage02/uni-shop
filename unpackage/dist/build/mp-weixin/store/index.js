"use strict";var e=require("../common/vendor.js"),o=e.createStore({state:{cart:JSON.parse(e.index.getStorageSync("cart")||"[]"),address:JSON.parse(e.index.getStorageSync("address")||"{}"),token:e.index.getStorageSync("token")||"",userinfo:JSON.parse(e.index.getStorageSync("userinfo")||"{}"),redirect:null},getters:{total(e){let o=0;return e.cart.forEach((e=>{o+=e.goods_count})),o},addstr:e=>e.address.provinceName?e.address.provinceName+e.address.cityName+e.address.countyName+e.address.detailInfo:"",checkedCount:e=>e.cart.filter((e=>1==e.goods_state)).reduce(((e,o)=>o.goods_count+e),0),isFull:e=>e.cart.every((e=>!0===e.goods_state)),checkoutAllGoodsAmount:e=>e.cart.filter((e=>!0===e.goods_state)).reduce(((e,o)=>e+o.goods_count*o.goods_price),0)},mutations:{addToCart:function(e,o){const t=e.cart.find((e=>e.goods_id===o.goods_id));t?t.goods_count+=1:e.cart.push(o),this.commit("saveToStorage")},saveToStorage(o){e.index.setStorageSync("cart",JSON.stringify(o.cart))},changeStatus(e,o){const t=e.cart.find((e=>e.goods_id==o.goods_id));t&&(t.goods_state=o.goods_state,this.commit("saveToStorage"))},changeCount(e,o){const t=e.cart.find((e=>e.goods_id==o.goods_id));t&&(t.goods_count=o.goods_count,this.commit("saveToStorage"))},removeGoodsById(e,o){e.cart=e.cart.filter((e=>e.goods_id!==o)),this.commit("saveToStorage")},updateAddress(e,o){e.address=o,this.commit("saveAddressToStorage")},saveAddressToStorage(o){e.index.setStorageSync("address",JSON.stringify(o.address))},updataAllGoodsState(e,o){e.cart.forEach((e=>{e.goods_state=o}))},saveUserInfoToStorage(o){e.index.setStorageSync("userinfo",JSON.stringify(o.userinfo))},updataUserInfo(e,o){e.userinfo=o,this.commit("saveUserInfoToStorage")},updataToken(o,t="elaina"){o.token=t,e.index.setStorageSync("token",o.token)},updataRedirect(e,o){e.redirect=o}},actions:{},modules:{}});exports.store=o;
